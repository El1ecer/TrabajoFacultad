{% extends "plantilla.html" %}
{% load static %}
{% block contenido %}

<h1>EDITAR DOCENTE</h1>

<form action="/Teaching/guardarEdicionDocente/" method="post" enctype="multipart/form-data" id="frm_editarDocente">
    {% csrf_token %}
    
    <input type="hidden" name="id" value="{{ docenteTemp.id }}">

    <label for="first_name">Nombre:</label><br>
    <input class="form-control" type="text" name="first_name" id="first_name" value="{{ docenteTemp.first_name }}"> <br>

    <label for="last_name">Apellido:</label><br>
    <input class="form-control" type="text" name="last_name" id="last_name" value="{{ docenteTemp.last_name }}"> <br>

    <label for="age">Edad:</label><br>
    <input class="form-control" type="number" name="age" id="age" value="{{ docenteTemp.age }}"> <br>

    <label for="email">Email:</label><br>
    <input class="form-control" type="email" name="email" id="email" value="{{ docenteTemp.email }}"> <br>

    <label for="carrera">Carrera:</label><br>
    <select class="form-control" name="carrera" id="carrera">
        <option value="">Seleccione una carrera</option>
        {% for car in carreras %}
            <option value="{{ car.id }}" {% if docente.carrera.id == car.id %}selected{% endif %}>{{ car.name_career }}</option>
        {% endfor %}
    </select><br>

    <label for="logo">Foto / Logo actual:</label><br>
    {% if docenteTemp.logo %}
        <img src="{{ docenteTemp.logo.url }}" alt="Logo actual" width="120"><br><br>
    {% else %}
        <small>No hay imagen cargada</small><br><br>
    {% endif %}
    <input class="form-control" type="file" name="logo" id="logo"> <br>

    <label for="pdf">Documento PDF actual:</label><br>
    {% if docenteTemp.pdf %}
        <a href="{{ docenteTemp.pdf.url }}" target="_blank">Ver PDF existente</a><br><br>
    {% else %}
        <small>No hay PDF cargado</small><br><br>
    {% endif %}
    <input class="form-control" type="file" name="pdf" id="pdf"> <br>

    <button class="btn btn-success" type="submit">GUARDAR</button>
    <a class="btn btn-outline-danger" href="/Teaching">CANCELAR</a>

</form>

<script>
    $("#frm_editarDocente").validate({
        rules: {
            "first_name": { required: true, minlength: 3 },
            "last_name": { required: true, minlength: 3 },
            "age": { digits: true, min: 18, max: 100 },
            "email": { required: true, email: true },
            "carrera": { required: true }
        },
        messages: {
            "first_name": { required: "Campo obligatorio", minlength: "Debe tener al menos 3 caracteres" },
            "last_name": { required: "Campo obligatorio", minlength: "Debe tener al menos 3 caracteres" },
            "age": { digits: "Debe ser un número", min: "Edad mínima 18", max: "Edad máxima 100" },
            "email": { required: "Campo obligatorio", email: "Ingrese un email válido" },
            "carrera": { required: "Seleccione una carrera" }
        }
    });
</script>

<script>
    $("#logo").fileinput({
        theme: "bootstrap5",
        language: "es",
        allowedFileExtensions: ["jpg", "jpeg", "png"],
        showUpload: false,
        dropZoneEnabled: true,
        maxFileSize: 2000,
        showPreview: true,
        browseLabel: "Seleccionar imagen",
        removeLabel: "Eliminar",
        initialCaption: "Arrastra y suelta la imagen aquí",
        showRemove: true,
        showZoom: true,
        showDrag: true
    });

    $("#pdf").fileinput({
        theme: "bootstrap5",
        language: "es",
        allowedFileExtensions: ["pdf"],
        showUpload: false,
        dropZoneEnabled: true,
        maxFileSize: 5000,
        showPreview: true,
        browseLabel: "Seleccionar PDF",
        removeLabel: "Eliminar",
        initialCaption: "Arrastra y suelta el PDF aquí",
        showRemove: true,
        showZoom: true,
        showDrag: true
    });
</script>

{% endblock %}
